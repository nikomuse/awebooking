!function(e,t){for(var i in t)e[i]=t[i]}(this,function(i){var a={};function s(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}return s.m=i,s.c=a,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=10)}({"./assets/babel/admin/schedule-calendar.js":function(e,t){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(l,d){"use strict";var h=60,i="YYYY-MM-DD",a=Backbone.Model.extend({defaults:{endDate:null,startDate:null,calendar:null},clear:function(){this.clearSelectedDate(null)},isValid:function(){return!(!this.has("calendar")||this.get("calendar")<1)&&0<=this.getNights()},clearSelectedDate:function(e){this.set({startDate:null,endDate:null}),this.set("calendar",e),this.trigger("clear_dates")},getNights:function(){return this.has("endDate")&&this.has("startDate")?this.get("endDate").diff(this.get("startDate"),"days"):-1}});window.ScheduleCalendar=Backbone.View.extend({options:{debug:!1,marker:".scheduler__marker",popper:".scheduler__popper > .scheduler__actions",granularity:"nightly",scheduleType:"day"},events:{"click      .scheduler__body .scheduler__date":"setSelectionDate","mouseenter .scheduler__body .scheduler__date":"drawMarkerOnHover"},initialize:function(e){this.isRTL="rtl"===l("html").attr("dir"),this.options.scheduleType=jQuery(".scheduler__container").data("scheduletype"),this.options=_.defaults(e||{},this.options),this.model=new a;var t=this.$el.find(".scheduler__column").first().outerWidth();h<t&&(h=t),this.$el.find(".scheduler__actions [data-schedule-action]").on("click",this.handleClickAction.bind(this)),this.$marker=this.$el.find(this.options.marker),this.$marker.hide(),this.setupPopper(),this.popper=this.$marker[0]._tippy,window.Waypoint&&this.setupLabelAnimate(),l(document).on("keyup",this.onKeyup.bind(this)),this.listenTo(this.model,"change:startDate change:endDate",this.setMarkerPosition),this.listenTo(this.model,"clear_dates",this.onClearSelectedDates),this.options.debug&&this.listenTo(this.model,"change",this.debug),this.$el.data("scheduler",this)},debug:function(){this.model.has("startDate")&&this.model.has("endDate")?console.log(this.model.get("calendar"),this.model.get("startDate").format(i)+" - "+this.model.get("endDate").format(i)):this.model.has("startDate")?console.log(this.model.get("calendar"),this.model.get("startDate").format(i)+" - null"):this.model.has("endDate")?console.log(this.model.get("calendar"),"null - "+this.model.get("endDate").format(i)):console.log("null - null")},onKeyup:function(e){27===e.keyCode&&this.model.clearSelectedDate()},handleClickAction:function(e){e.preventDefault();var t=l(e.currentTarget);return!!this.model.isValid()&&(!!t.data("scheduleAction")&&void this.trigger("action:"+t.data("scheduleAction"),e,this.model))},onClearSelectedDates:function(){this.popper.hide(),this.$marker.find("span").text(0),this.trigger("clear")},setSelectionDate:function(e){var t=l(e.currentTarget),i=this.getUnitByElement(t),a=d(t.data(this.getDataByGranularity(this.options.scheduleType)));if(this.model.has("startDate")&&this.model.has("endDate"))this.model.clearSelectedDate(i);else{if((this.model.has("calendar")&&i!==this.model.get("calendar")||this.model.has("startDate")&&a.isBefore(this.model.get("startDate"),this.options.scheduleType))&&this.model.clearSelectedDate(i),!this.model.has("startDate")&&!this.model.has("endDate"))return this.model.set("calendar",i),this.model.set("startDate",a.clone()),void this.drawMarkerOnHover(e);"hour"!==this.options.scheduleType&&"nightly"===this.options.granularity&&a.diff(this.model.get("startDate"),"days")<1||(this.popper.show(),this.model.set("endDate",a.clone()),this.trigger("apply",this.model,this))}},setMarkerPosition:function(){var e,t,i,a,s,n=this.model.get("endDate"),r=this.model.get("startDate");_.isNull(r)&&_.isNull(n)?this.$marker.css("width",h).hide():(e=this.getElementByDate(this.model.get("calendar"),r),_.isNull(n)?(i={top:(t=this.getCellPossiton(e)).top,left:t.left},this.isRTL,this.$marker.show().css(i)):(a=this.getElementByDate(this.model.get("calendar"),n),s="hour"===this.options.scheduleType?27:h,this.$marker.css("width",(a.index()-e.index()+1)*s)))},drawMarkerOnHover:function(e){var t,i,a,s,n,r=l(e.currentTarget),o=this.getUnitByElement(r);!this.model.has("calendar")||this.model.get("calendar")!==o||!this.model.has("startDate")||this.model.has("startDate")&&this.model.has("endDate")||(t=d(r.data(this.getDataByGranularity(this.options.scheduleType))),(i=this.model.get("startDate")).isSameOrBefore(t,this.options.scheduleType)&&(a=this.getElementByDate(o,i),s=r.index()-a.index()+1,n="hour"===this.options.scheduleType?27:h,this.$marker.css("width",s*n),this.$marker.find("span").text("daily"===this.options.granularity?s:s-1)))},getDataByGranularity:function(e){return"hour"===e?"hour":"date"},getElementByDate:function(e,t){return"object"===s(t)&&(t="hour"===this.options.scheduleType?t.format("YYYY-MM-DD HH:mm:ss"):t.format(i)),this.$el.find('[data-calendar="'+e+'"]').find(".scheduler__date[data-"+this.getDataByGranularity(this.options.scheduleType)+'="'+t+'"]')},getUnitByElement:function(e){var t=l(e).data("calendar");return void 0===t&&(t=l(e).closest("[data-calendar]").data("calendar")),t=parseInt(t,10),isNaN(t)?0:t},getCellPossiton:function(e){var t=e.offset(),i=this.$el.find(".scheduler__body").offset();return{top:t.top-i.top,left:t.left-i.left}},setupPopper:function(){tippy(this.$marker[0],{html:this.$el.find(this.options.popper)[0],theme:"abrs-tippy",arrow:!0,distance:0,trigger:"manual",placement:"bottom",hideOnClick:"persistent",interactive:!0,performance:!0,animation:"shift-away",duration:[150,150],popperOptions:{modifiers:{hide:{enabled:!1},preventOverflow:{enabled:!1}}}})},setupLabelAnimate:function(){function e(e){var t=a.$el.find(".scheduler__aside .scheduler__month-label"),i=l(this.element);"right"===e?(i.attr("data-prev-text",t.text()),t.text(i.text())):(t.text(i.data("prevText")),i.attr("data-prev-text",""))}var a=this,t=a.$el.find(".scheduler__main")[0];a.$el.find(".scheduler__month-label").each(function(){new Waypoint({element:this,context:t,offset:-50,horizontal:!0,handler:e})})}})}(jQuery,(window.flatpickr,window.moment))},10:function(e,t,i){e.exports=i("./assets/babel/admin/schedule-calendar.js")}}));